{% extends "base.html" %}

{% block title %}Meal Impact Analysis{% endblock %}

{% block content %}
<div class="analysis-container">
    <header class="impact-header">
        <h1>Your meal's impact is: <strong>{{ qualitative_impact | replace('_', ' ') | title }}</strong></h1>
    </header>

    <div class="gauge-wrapper">
        {# Map impacts to images #}
        {% set impact_images = {
            'very_high': 'very_high.png',
            'high': 'high.png',
            'medium': 'medium.png',
            'low': 'low.png',
            'very_low': 'very_low.png'
        } %}

        {% if qualitative_impact in impact_images %}
            <img src="{{ url_for('static', filename='images/' ~ impact_images[qualitative_impact]) }}"
                 alt="Impact gauge showing {{ qualitative_impact }}"
                 class="responsive-gauge">
        {% else %}
            <p>Impact data visualization unavailable.</p>
        {% endif %}
    </div>

    <section class="impact-details">
        <p>This meal contributed to <strong>{{ total_emissions }}</strong> of greenhouse gas emissions.</p>
        <p>That is the equivalent of driving <strong>{{ car_miles }}</strong> in your car!</p>
    </section>

    <hr>

    <section class="action-tip">
        <h3>Direct Action You Can Take:</h3>
        <blockquote>{{ generic_tip }}</blockquote>
    </section>
</div>
{% endblock %}